<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head th:include="layout/base :: base('질문보기')">
    <title>Title</title>
  </head>
  <script defer th:src="@{/js/question/questionList.js}"></script>
  <style>
    a {
      color: #000000;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
  <body>
    <nav th:replace="layout/nav :: nav"></nav>

    <style>
      .page-item-no:active {
        color: yellow;
      }
    </style>

    <div class="container col-md-10">
      <!--  질문 목록 제목  -->

      <p
        class="fs-1 text-center mb-5"
        th:text="'질문 목록(' + ${list.totalCnt} + ')'"
      ></p>

      <!--  질문 검색  -->

      <form class="d-flex flex-row-reverse" action="/question/list" method="get">

        <button type="submit" class="btn btn-primary btn-sm ms-3" onclick="search()">검색</button>

        <div class="form-outline">
          <input type="text" name="title" id="form1" class="form-control searchInput"/>
          <label class="form-label" for="form1"></label>
        </div>

        <div class="dropdown me-3">
          <button
                  class="btn btn-primary dropdown-toggle searchDrop"
                  type="button"
                  id="dropdownMenuButton"
                  data-mdb-toggle="dropdown"
                  aria-expanded="false"
          >
            title
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <li><a class="dropdown-item" href="#" onclick="selectSearchFilter('title')">제목</a></li>
            <li><a class="dropdown-item" href="#" onclick="selectSearchFilter('username')">작성자</a></li>
          </ul>
        </div>

      </form>

      <hr />

      <!--  질문 목록 리스트  -->
      <table class="table animation fade-in shadow" style="border-radius: 10px">
        <thead class="table-primary">
          <tr>
            <th>No</th>
            <th>태그</th>
            <th style="text-align: center; width: 40%">제목</th>
            <th style="text-align: center">작성자</th>
            <th style="text-align: center">작성시간</th>
            <th style="text-align: center">조회수</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="item, idx : ${list.dtoList}">
            <td
              th:text="${list.totalCnt - ((list.curPage - 1) * 10) - idx.index}"
            ></td>
            <td
              th:text="${item.tagName}"
              th:style="'text-shadow: 1px 1px 10px ' + ${item.tagColor}"
            ></td>
            <td><a th:href="@{/question/{id}(id=${item.questionId})}" th:text="${item.title}"></a></td>
            <td style="text-align: center" th:text="${item.username}"></td>
            <td style="text-align: center" th:text="${item.createTime}"></td>
            <td style="text-align: center" th:text="${item.view}"></td>
          </tr>
        </tbody>
      </table>
      <!--  페이징  -->
      <div class="d-flex justify-content-center pt-3">
        <ul class="pagination">
          <li class="page-item">
            <a
              class="page-link"
              href="#"
              th:onclick="'previous(' + ${list.previous} + ',' + ${list.startPage} + ')'"
            >
              <i class="fa fa-angle-left" aria-hidden="true"></i>
              <span class="sr-only">목록에서 이전 페이지로 이동</span>
            </a>
          </li>

          <li
            class="page-item page-item-no"
            th:each="idx : ${#numbers.sequence(list.getStartPage(), list.getEndPage())}"
          >
            <a
              class="page-link"
              th:href="@{/question/list(page=${idx})}"
              th:text="${idx}"
            ></a>
          </li>

          <li class="page-item">
            <a
              class="page-link"
              href="#"
              th:onclick="'next(' + ${list.next} + ',' + ${list.startPage} + ')'"
            >
              <i class="fa fa-angle-right" aria-hidden="true"></i>
              <span class="sr-only">목록에서 다음 페이지로 이동</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
